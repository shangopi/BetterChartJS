{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shang\\\\gitrepo\\\\BetterChartJS\\\\client\\\\src\\\\components\\\\Chart_Components\\\\ArcChart.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport ArcLogic from './Logic/ArcLogic';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Canvas = props => {\n  _s();\n\n  const data = props.data;\n  const [radius_max, set_max] = useState(50);\n  let [sourceNode, targetNode, weights, allNodeList, allNodesNo] = ArcLogic(data);\n  const canvasRef = useRef(null);\n\n  const draw = ctx => {\n    const x1 = 70; //diagram staring position\n\n    const x2 = props.config.width; //diagram ending position\n\n    const l = (x2 - x1) / (allNodesNo - 1);\n    const highest_weight = Math.max(...weights);\n\n    for (let i = 0; i < allNodeList.length; i++) {\n      ctx.beginPath();\n      ctx.fillStyle = \"#000000\";\n      ctx.arc(x1 + i * l, radius_max, props.config.circle_size, 0, 2 * Math.PI, true);\n      ctx.fill();\n      ctx.beginPath();\n      ctx.font = props.config.label_size + \" \" + props.config.label_font;\n      ctx.fillStyle = \"#000000\";\n      ctx.textAlign = \"center\";\n\n      if (props.config.orientation == 0) {\n        ctx.fillText(allNodeList[i], x1 + i * l, radius_max + 30);\n      } else {\n        ctx.save();\n        ctx.translate(x1 + i * l - 6, radius_max + 30);\n        ctx.rotate(0.5 * Math.PI);\n        var rText = allNodeList[i];\n        ctx.textAlign = \"left\";\n        ctx.fillText(rText, 0, 0);\n        ctx.restore();\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(x1, radius_max);\n      ctx.lineTo(x2, radius_max);\n      ctx.stroke();\n    }\n\n    for (let i = 0; i < data.length; i++) {\n      var source_position = allNodeList.indexOf(data[i][0]);\n      var target_position = allNodeList.indexOf(data[i][1]);\n      var x = x1 + source_position * l;\n      var num = Number(data[i][2]) / highest_weight * props.config.arc_strength;\n      var radius = (target_position - source_position) * l / 2;\n\n      if (Math.abs(radius) > radius_max) {\n        set_max(Math.abs(radius) + 40);\n      }\n\n      ctx.beginPath();\n      ctx.lineWidth = num;\n      ctx.strokeStyle = props.config.color1;\n\n      if (radius < 0) {\n        ctx.strokeStyle = props.config.color2;\n        ctx.arc(x + radius, radius_max, -radius, 0, Math.PI, true);\n      } else {\n        ctx.arc(x + radius, radius_max, radius, 0, Math.PI, true);\n      }\n\n      ctx.stroke();\n    }\n  };\n\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const context = canvas.getContext('2d'); //const { width, height } = canvas.getBoundingClientRect()\n\n    canvas.width = 1000;\n\n    if (props.config.orientation == 0) {\n      canvas.height = radius_max + 40;\n    } else {\n      canvas.height = radius_max + 150;\n    } //Our draw come here\n\n\n    draw(context);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [props.config.show_heading && /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: 'mt-5 text-center ',\n      style: {\n        fontFamily: props.config.title_font,\n        fontSize: props.config.title_size\n      },\n      children: \" Sample Arc Chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 39\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        className: \"{canvas1}\",\n        ref: canvasRef,\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 28\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 8\n  }, this);\n};\n\n_s(Canvas, \"8VwufNHg8Y2vLIFt352nforUH1Y=\");\n\n_c = Canvas;\nexport default Canvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"names":["React","useRef","useEffect","useState","ArcLogic","Canvas","props","data","radius_max","set_max","sourceNode","targetNode","weights","allNodeList","allNodesNo","canvasRef","draw","ctx","x1","x2","config","width","l","highest_weight","Math","max","i","length","beginPath","fillStyle","arc","circle_size","PI","fill","font","label_size","label_font","textAlign","orientation","fillText","save","translate","rotate","rText","restore","moveTo","lineTo","stroke","source_position","indexOf","target_position","x","num","Number","arc_strength","radius","abs","lineWidth","strokeStyle","color1","color2","canvas","current","context","getContext","height","show_heading","fontFamily","title_font","fontSize","title_size","display","justifyContent","alignItems"],"sources":["C:/Users/shang/gitrepo/BetterChartJS/client/src/components/Chart_Components/ArcChart.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react'\r\nimport ArcLogic from './Logic/ArcLogic';\r\n\r\n\r\nconst Canvas = props => {\r\n    const data = props.data;\r\n    const [radius_max,set_max] = useState(50);\r\n    let [sourceNode,targetNode,weights,allNodeList,allNodesNo] = ArcLogic(data); \r\n    const canvasRef = useRef(null);\r\n  \r\n  \r\n  const draw = ctx => {\r\n    const x1= 70; //diagram staring position\r\n    const x2 =props.config.width; //diagram ending position\r\n    const l = (x2-x1)/(allNodesNo-1);\r\n    const highest_weight=Math.max(...weights);\r\n\r\n\r\n  \r\n    for(let i = 0;i< allNodeList.length;i++){\r\n        ctx.beginPath();\r\n\r\n        ctx.fillStyle=\"#000000\"\r\n        ctx.arc(x1+i*l, radius_max , props.config.circle_size , 0, 2*Math.PI,true);\r\n        ctx.fill();\r\n\r\n        \r\n        \r\n        ctx.beginPath();\r\n        ctx.font = props.config.label_size + \" \"+ props.config.label_font;\r\n        ctx.fillStyle= \"#000000\";\r\n        ctx.textAlign = \"center\";\r\n        if(props.config.orientation == 0){\r\n            ctx.fillText(allNodeList[i],x1+i*l,radius_max + 30)\r\n        }\r\n        else{\r\n            ctx.save();\r\n            ctx.translate(x1+i*l - 6,radius_max + 30);\r\n            ctx.rotate(0.5*Math.PI);\r\n\r\n            var rText = allNodeList[i];\r\n            ctx.textAlign = \"left\";\r\n            ctx.fillText(rText , 0, 0);\r\n            ctx.restore();\r\n        }   \r\n        \r\n        \r\n\r\n        ctx.beginPath();\r\n        ctx.moveTo(x1,radius_max );\r\n        ctx.lineTo(x2,radius_max );\r\n        ctx.stroke();\r\n    }\r\n\r\n    \r\n    for(let i=0;i<data.length;i++){\r\n       \r\n        var source_position = allNodeList.indexOf(data[i][0]);\r\n        var target_position = allNodeList.indexOf(data[i][1]);\r\n        var x=x1 + source_position*l;\r\n        var num= ((Number(data[i][2]))/highest_weight)*props.config.arc_strength;\r\n        var radius = ((target_position-source_position)*l/2);\r\n        if(Math.abs(radius)>radius_max){\r\n            set_max(Math.abs(radius)+40);\r\n            \r\n        }\r\n        \r\n        ctx.beginPath();\r\n        ctx.lineWidth=num;\r\n        ctx.strokeStyle=props.config.color1;\r\n        if (radius<0){\r\n            ctx.strokeStyle=props.config.color2;\r\n            ctx.arc(x+radius, radius_max , -radius, 0, Math.PI,true);\r\n        }\r\n        else{\r\n            ctx.arc(x+radius, radius_max , radius, 0, Math.PI,true);\r\n        }\r\n        ctx.stroke();\r\n    }\r\n    \r\n  }\r\n  \r\n \r\n\r\n  \r\n  useEffect(() => {\r\n    \r\n    const canvas = canvasRef.current\r\n    const context = canvas.getContext('2d')\r\n    //const { width, height } = canvas.getBoundingClientRect()\r\n    canvas.width=1000;\r\n    if(props.config.orientation ==0){\r\n        canvas.height=radius_max + 40;\r\n    }\r\n    else{\r\n        canvas.height=radius_max + 150;\r\n    }\r\n    \r\n    \r\n    //Our draw come here\r\n    draw(context)\r\n  })\r\n  \r\n\r\n\r\n   return ( \r\n       <div>\r\n        \r\n        {props.config.show_heading && <h2 className={'mt-5 text-center '} style={{fontFamily : props.config.title_font, fontSize: props.config.title_size}}> Sample Arc Chart</h2> }\r\n        <div  style={{\r\n     display: \"flex\",    justifyContent: \"center\",\r\n    alignItems: \"center\"}}><canvas className='{canvas1}'  ref={canvasRef} {...props}/></div>\r\n\r\n\r\n      </div>\r\n     );\r\n     \r\n}\r\n\r\n\r\n\r\nexport default Canvas"],"mappings":"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"},"metadata":{},"sourceType":"module"}